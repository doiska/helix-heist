Important:
- For some reason I saw some of the server code being sent to the client, I believe that's a bug, probably because there's no encryption yet.
- I noticed it after moving shared/config.lua to server/config.lua, preventing the user from knowing (through some kind of client code dump) where the door, vault, etc are.

Data structure:
- I couldn't find a unique id in the documentation, had the GetPlayerById, but no id. So I was storing the player name (found in HPlayer), but it's not possible to send a ClientEvent with that. I'm now storing the HPlayer instance, but i'm not comfortable with this approach, since storing an "object" as key can lead to trick situations. I saw QBCore doing it, so I think it's fine. https://github.com/hypersonic-laboratories/qbcore-rp/blob/f3a0f0379e2b97570d72f74f65346adf8411cd92/qb-core/Server/player.lua#L20

State Machine:
  Used a pretty straightforward approach that can be improved later.
  By using "canTransitionTo" and validating state transitions we can block invalid states.

States (in order of transition):
- IDLE -> Heist was created but still waiting players to join
- PREPARED -> Players are ready to start the heist
  - If someone leaves it goes back to idle.
  - I'm not sure if that was the right decision, but I made it based on the script being kinda arcade like GTA Online heists, where they have a lobby and heist per lobby.
- ENTRY -> Players are ready to attempt to enter the bank

Data-exposing tradeoffs:
- In the entry phase, the client-side has access to all door positions, thats because I couldn't find in the documentation a way to get player position server-side. And that's also a trade-off choice, I think we'd be hurting user experience without much gain, by removing, for example, the possibility of waypoints in each door.

Loot:
- States
  - Players can start looting and stop (not collecting it)
  - Only 1 player can loot per loot spot
  - Loot spots can be collected by multiple players (configurable in loot settings)
- Considerations:
 - Initially I thought that only the player should know how much they collected, but I think that everyone should know to coordinate better (like if someone has more money they should leave first) 

Minigame:
- Pattern
 - The pattern is generated on server-side and also validated there, the user has no access to what the pattern is.
 - The minigame has a friendly feature, when the user gets 1 number right they get +5 seconds, avoiding frustration.
- Lockpick
 - I imagined lockpick as a circle, having "angles", units of distance.
 - It allowed me to generate a sequence of units, let's say [210, 120, 270, 135, 210], and based on that I can:
   - Make the lockpick "shake" as the user is getting closer to the angle
   - We'd have to display a shaking animation to work as lag compensation when the user triggers and makes the server request, this way we can make the request, wait for the response and the user wouldn't notice it
- Wordle (extra)
 - I tried to make something like wordle, especially with the UI (generated by bldr)
 - Turns out it was really fun and the countdown is a nice touch
 - The number seq generation and validation is completely server-side

Escape:
  - All players need to escape to mark the heist as completed - Enjoyable for both sides (police and robbers)

Explain what runs server-side:

- Minigame validation
- Loot generation
- Alarm triggers
  - The alarm has a chance to fire: silentAlarmChance and will be fired after silentAlarmDelayInSeconds seconds.
  - We only need to dispatch a event client-side for the participants if the LOUD alarm is fired (to spawn sfx) 

- PD alerts
 - PD gets alerted after a configurable period of time (policeAutoArriveInSeconds)
 - The department receives:
   - If the alarm was silent or loud
   - How many players are involved in the heist
   - The location of the bank (not players)

What is validated?

What canâ€™t trust the client?
- The client has no knowledge of where things are until they reach the phase. For example:
  - Entry: only knows where the door is (could be validated on server, but removes the ability of creating waypoints)
  - Vault Closed: vault door position
  - Vault Open: loot position, NOT the loot content. It's only aware of the alarm if it was a LOUD alarm, the silent has no client-side events.
  - 
- Minigame results: everything is handled server-side in heist-minigame.lua, the player only makes attempts
  - The client is aware of the progress, and only what will be displayed on their UI, nothing else.
  - All minigames uses "attempts" as TriggerCallback, validating only server-side.
- Loot: during the VAULT_OPEN phase, the player has no knowledge of what the loot items are, only the location.
- The player has no knowledge if the alarm was fired, unless it's a LOUD alarm, no event is sent.
- The client is only aware of their heist, no event is dispatched to all players, everything is handled by "broadcastEvent" in heist.lua
