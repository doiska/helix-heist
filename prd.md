IMPORTANT
- About the UI: I decided to try "recreating" the core of react-query (query, mutate, cache invalidation), ik the code is a mess, and its fine! I'm still working on it.

Code definition:
- Started as a single heist-instance.lua file, but as it grew, I found necessary to split in different ones to keep readable.
- Now we have: heist-state as a class of Heists and other modules as stateless actions (actions, loot, etc).

State Machine:
  Used a pretty straightforward approach that can be improved later.
  By using "canTransitionTo" and validating state transitions we can block invalid states.

States (in order of transition):
- IDLE -> Heist was created but still waiting players to join
- PREPARED -> Players are ready to start the heist
  - If someone leaves it goes back to idle.
  - I'm not sure if that was the right decision, but I made it based on the script being kinda arcade like GTA Online heists, where they have a lobby and heist per lobby.
- ENTRY -> Players are ready to attempt to enter the bank
  - If someone leaves, it transitions to FAILED then after cleanup interval it **SHOULD (not implemented)** go back to IDLE.

Loot:
- States
  - Players can start looting and stop (not collecting it)
  - Only 1 player can loot per loot spot
  - Loot spots can be collected by multiple players (configurable in loot settings)
- Considerations:
 - Initially I thought that only the player should know how much they collected, but I think that everyone should know to coordinate better (like if someone has more money they should leave first) 

Minigame:
- Pattern
 - The pattern is generated on server-side and also validated there, the user has no access to what the pattern is.
 **- I considered adding a ratelimit but i'm not sure what the reaction would be.**
 - The minigame has a friendly feature, when the user gets 1 number right they get +5 seconds, avoiding frustration.
- Wordle
 - I tried to make something like wordle, especially with the UI (generated by bldr)
 - Turns out it was really fun and the countdown is a nice touch
 - The number seq generation and validation is completely server-side

Escape:
  - All players need to escape to mark the heist as completed - Enjoyable for both sides (police and robbers)


TODO:
- reload state
- persist data
- start minigame -> validate -> success/fail
-
